
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="MRIQC" />
<title>afni_proc.py: group report</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<style type="text/css">
body { font-family: helvetica; }

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }


div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
}

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
}

span.problematic {
  color: red;
  font-weight: bold ;
}

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

ol.simple, ul.simple {
  margin-bottom: 1em }

p.label {
  white-space: nowrap }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

div.embeded-report {
  width: 100%;
  page-break-before:always;
  padding-top: 20px;
}

div.embeded-report svg { width: 80%; }

span.qa-fail {
  color: white;
  font-weight: bold;
  background-color: #FF6347;
}

span.qa-pass {
  color: white;
  font-weight: bold;
  background-color: #32CD32;
}

</style>
</head>
<body>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script type="text/javascript">function brainsprite(params){function setNearestNeighbour(context,flag){context.imageSmoothingEnabled=flag;return context}var brain={};brain.nanValue=false;brain.smooth=typeof params.smooth!=="undefined"?params.smooth:false;brain.fastDraw=typeof params.fastDraw!=="undefined"?params.fastDraw:false;brain.canvas=document.getElementById(params.canvas);brain.context=brain.canvas.getContext("2d");brain.context=setNearestNeighbour(brain.context,brain.smooth);brain.canvasY=document.createElement("canvas");brain.contextY=brain.canvasY.getContext("2d");brain.canvasZ=document.createElement("canvas");brain.contextZ=brain.canvasZ.getContext("2d");brain.canvasRead=document.createElement("canvas");brain.contextRead=brain.canvasRead.getContext("2d");brain.canvasRead.width=1;brain.canvasRead.height=1;brain.onclick=typeof params.onclick!=="undefined"?params.onclick:"";brain.colorBackground=typeof params.colorBackground!=="undefined"?params.colorBackground:"#000000";brain.flagCoordinates=typeof params.flagCoordinates!=="undefined"?params.flagCoordinates:false;brain.origin=typeof params.origin!=="undefined"?params.origin:{X:0,Y:0,Z:0};brain.voxelSize=typeof params.voxelSize!=="undefined"?params.voxelSize:1;brain.heightColorBar=.04;brain.sizeFont=.075;brain.colorFont=typeof params.colorFont!=="undefined"?params.colorFont:"#FFFFFF";if(brain.flagCoordinates){brain.spaceFont=.1}else{brain.spaceFont=0}brain.sprite=document.getElementById(params.sprite);brain.nbCol=brain.sprite.width/params.nbSlice.Y;brain.nbRow=brain.sprite.height/params.nbSlice.Z;brain.nbSlice={X:brain.nbCol*brain.nbRow,Y:params.nbSlice.Y,Z:params.nbSlice.Z};brain.widthCanvas={X:0,Y:0,Z:0};brain.heightCanvas={X:0,Y:0,Z:0,max:0};brain.numSlice={X:Math.floor(brain.nbSlice.X/2),Y:Math.floor(brain.nbSlice.Y/2),Z:Math.floor(brain.nbSlice.Z/2)};brain.coordinatesSlice={X:0,Y:0,Z:0};brain.planes={};brain.planes.canvasX=document.createElement("canvas");brain.planes.contextX=brain.planes.canvasX.getContext("2d");params.overlay=typeof params.overlay!=="undefined"?params.overlay:false;if(params.overlay){brain.overlay={};brain.overlay.sprite=document.getElementById(params.overlay.sprite);brain.overlay.nbCol=brain.overlay.sprite.width/params.overlay.nbSlice.Y;brain.overlay.nbRow=brain.overlay.sprite.height/params.overlay.nbSlice.Z;brain.overlay.nbSlice={X:brain.overlay.nbCol*brain.overlay.nbRow,Y:params.overlay.nbSlice.Y,Z:params.overlay.nbSlice.Z};brain.overlay.opacity=typeof params.overlay.opacity!=="undefined"?params.overlay.opacity:1}params.colorMap=typeof params.colorMap!=="undefined"?params.colorMap:false;if(params.colorMap){brain.colorMap={};brain.colorMap.img=document.getElementById(params.colorMap.img);brain.colorMap.min=params.colorMap.min;brain.colorMap.max=params.colorMap.max;params.colorMap.hide=typeof params.colorMap.hide!=="undefined"?params.colorMap.hide:false;brain.colorMap.canvas=document.createElement("canvas");brain.colorMap.context=brain.colorMap.canvas.getContext("2d");brain.colorMap.canvas.width=brain.colorMap.img.width;brain.colorMap.canvas.height=brain.colorMap.img.height;brain.colorMap.context.drawImage(brain.colorMap.img,0,0,brain.colorMap.img.width,brain.colorMap.img.height,0,0,brain.colorMap.img.width,brain.colorMap.img.height)}brain.getValue=function(rgb,colorMap){if(!colorMap){return NaN}var cv,dist,nbColor,ind,val,voxelValue;nbColor=colorMap.canvas.width;ind=NaN;val=Infinity;for(xx=0;xx<nbColor;xx++){cv=colorMap.context.getImageData(xx,0,1,1).data;dist=Math.pow(cv[0]-rgb[0],2)+Math.pow(cv[1]-rgb[1],2)+Math.pow(cv[2]-rgb[2],2);if(dist<val){ind=xx;val=dist}}voxelValue=ind*(colorMap.max-colorMap.min)/(nbColor-1)+colorMap.min;return voxelValue};brain.init=function(){brain.widthCanvas.X=Math.floor(brain.canvas.parentElement.clientWidth*(brain.nbSlice.Y/(2*brain.nbSlice.X+brain.nbSlice.Y)));brain.widthCanvas.Y=Math.floor(brain.canvas.parentElement.clientWidth*(brain.nbSlice.X/(2*brain.nbSlice.X+brain.nbSlice.Y)));brain.widthCanvas.Z=Math.floor(brain.canvas.parentElement.clientWidth*(brain.nbSlice.X/(2*brain.nbSlice.X+brain.nbSlice.Y)));brain.heightCanvas.X=Math.floor(brain.widthCanvas.X*brain.nbSlice.Z/brain.nbSlice.Y);brain.heightCanvas.Y=Math.floor(brain.widthCanvas.Y*brain.nbSlice.Z/brain.nbSlice.X);brain.heightCanvas.Z=Math.floor(brain.widthCanvas.Z*brain.nbSlice.Y/brain.nbSlice.X);brain.heightCanvas.max=Math.max(brain.heightCanvas.X,brain.heightCanvas.Y,brain.heightCanvas.Z);if(brain.canvas.width!=brain.widthCanvas.X+brain.widthCanvas.Y+brain.widthCanvas.Z){brain.canvas.width=brain.widthCanvas.X+brain.widthCanvas.Y+brain.widthCanvas.Z;brain.canvas.height=Math.round((1+brain.spaceFont)*brain.heightCanvas.max);brain.context=setNearestNeighbour(brain.context,brain.smooth)}brain.sizeFontPixels=Math.round(brain.sizeFont*brain.heightCanvas.max);brain.context.font=brain.sizeFontPixels+"px Arial";brain.planes.canvasX.width=brain.sprite.width;brain.planes.canvasX.height=brain.sprite.height;brain.planes.contextX.globalAlpha=1;brain.planes.contextX.drawImage(brain.sprite,0,0,brain.sprite.width,brain.sprite.height,0,0,brain.sprite.width,brain.sprite.height);if(brain.overlay){brain.planes.contextX.globalAlpha=brain.overlay.opacity;brain.planes.contextX.drawImage(brain.overlay.sprite,0,0,brain.overlay.sprite.width,brain.overlay.sprite.height,0,0,brain.sprite.width,brain.sprite.height)}brain.planes.canvasY=document.createElement("canvas");brain.planes.contextY=brain.planes.canvasY.getContext("2d");if(brain.fastDraw){brain.planes.canvasY.width=brain.nbSlice.X*brain.nbCol;brain.planes.canvasY.height=brain.nbSlice.Z*Math.ceil(brain.nbSlice.Y/brain.nbCol);var pos={};for(yy=0;yy<brain.nbSlice.Y;yy++){for(xx=0;xx<brain.nbSlice.X;xx++){pos.XW=xx%brain.nbCol;pos.XH=(xx-pos.XW)/brain.nbCol;pos.YW=yy%brain.nbCol;pos.YH=(yy-pos.YW)/brain.nbCol;brain.planes.contextY.globalAlpha=1;brain.planes.contextY.drawImage(brain.sprite,pos.XW*brain.nbSlice.Y+yy,pos.XH*brain.nbSlice.Z,1,brain.nbSlice.Z,pos.YW*brain.nbSlice.X+xx,pos.YH*brain.nbSlice.Z,1,brain.nbSlice.Z);if(brain.overlay){brain.planes.contextY.globalAlpha=brain.overlay.opacity;brain.planes.contextY.drawImage(brain.overlay.sprite,pos.XW*brain.nbSlice.Y+yy,pos.XH*brain.nbSlice.Z,1,brain.nbSlice.Z,pos.YW*brain.nbSlice.X+xx,pos.YH*brain.nbSlice.Z,1,brain.nbSlice.Z)}}}}else{brain.planes.canvasY.width=brain.nbSlice.X;brain.planes.canvasY.height=brain.nbSlice.Z}brain.planes.canvasZ=document.createElement("canvas");brain.planes.contextZ=brain.planes.canvasZ.getContext("2d");if(brain.fastDraw){brain.planes.canvasZ.height=Math.max(brain.nbSlice.X*brain.nbCol,brain.nbSlice.Y*Math.ceil(brain.nbSlice.Z/brain.nbCol));brain.planes.canvasZ.width=brain.planes.canvasZ.height;brain.planes.contextZ.rotate(-Math.PI/2);brain.planes.contextZ.translate(-brain.planes.canvasZ.width,0);var pos={};for(zz=0;zz<brain.nbSlice.Z;zz++){for(xx=0;xx<brain.nbSlice.X;xx++){pos.XW=xx%brain.nbCol;pos.XH=(xx-pos.XW)/brain.nbCol;pos.ZH=zz%brain.nbCol;pos.ZW=Math.ceil(brain.nbSlice.Z/brain.nbCol)-1-(zz-pos.ZH)/brain.nbCol;brain.planes.contextZ.globalAlpha=1;brain.planes.contextZ.drawImage(brain.sprite,pos.XW*brain.nbSlice.Y,pos.XH*brain.nbSlice.Z+zz,brain.nbSlice.Y,1,pos.ZW*brain.nbSlice.Y,pos.ZH*brain.nbSlice.X+xx,brain.nbSlice.Y,1);if(brain.overlay){brain.planes.contextZ.globalAlpha=brain.overlay.opacity;brain.planes.contextZ.drawImage(brain.overlay.sprite,pos.XW*brain.nbSlice.Y,pos.XH*brain.nbSlice.Z+zz,brain.nbSlice.Y,1,pos.ZW*brain.nbSlice.Y,pos.ZH*brain.nbSlice.X+xx,brain.nbSlice.Y,1)}}}}else{brain.planes.canvasZ.width=brain.nbSlice.X;brain.planes.canvasZ.height=brain.nbSlice.Y;brain.planes.contextZ.rotate(-Math.PI/2);brain.planes.contextZ.translate(-brain.nbSlice.Y,0)}};brain.draw=function(slice,type){var pos={},coord,coordWidth;brain.numSlice[type]=slice;brain.coordinatesSlice.X=brain.numSlice.X*brain.voxelSize-brain.origin.X;brain.coordinatesSlice.Y=brain.numSlice.Y*brain.voxelSize-brain.origin.Y;brain.coordinatesSlice.Z=(brain.nbSlice.Z-brain.numSlice.Z-1)*brain.voxelSize-brain.origin.Z;if(brain.overlay&&!brain.nanValue){try{pos.XW=brain.numSlice.X%brain.nbCol;pos.XH=(brain.numSlice.X-pos.XW)/brain.nbCol;brain.contextRead.drawImage(brain.overlay.sprite,pos.XW*brain.nbSlice.Y+brain.numSlice.Y,pos.XH*brain.nbSlice.Z+brain.numSlice.Z,1,1,0,0,1,1);rgb=brain.contextRead.getImageData(0,0,1,1).data;brain.voxelValue=brain.getValue(rgb,brain.colorMap)}catch(err){console.warn(err.message);rgb=0;brain.nanValue=true;brain.voxelValue=NaN}}else{brain.voxelValue=NaN}switch(type){case"X":pos.XW=brain.numSlice.X%brain.nbCol;pos.XH=(brain.numSlice.X-pos.XW)/brain.nbCol;brain.context.fillStyle=brain.colorBackground;brain.context.fillRect(0,0,brain.widthCanvas.X,brain.canvas.height);brain.context.drawImage(brain.planes.canvasX,pos.XW*brain.nbSlice.Y,pos.XH*brain.nbSlice.Z,brain.nbSlice.Y,brain.nbSlice.Z,0,(brain.heightCanvas.max-brain.heightCanvas.X)/2,brain.widthCanvas.X,brain.heightCanvas.X);if(brain.flagCoordinates){coord="x="+brain.coordinatesSlice.X;coordWidth=brain.context.measureText(coord).width;brain.context.fillStyle=brain.colorFont;brain.context.fillText(coord,brain.widthCanvas.X/2-coordWidth/2,Math.round(brain.canvas.height-brain.sizeFontPixels/2))}break;case"Y":brain.context.fillStyle=brain.colorBackground;brain.context.fillRect(brain.widthCanvas.X,0,brain.widthCanvas.Y,brain.canvas.height);if(brain.fastDraw){pos.YW=brain.numSlice.Y%brain.nbCol;pos.YH=(brain.numSlice.Y-pos.YW)/brain.nbCol;brain.context.drawImage(brain.planes.canvasY,pos.YW*brain.nbSlice.X,pos.YH*brain.nbSlice.Z,brain.nbSlice.X,brain.nbSlice.Z,brain.widthCanvas.X,(brain.heightCanvas.max-brain.heightCanvas.Y)/2,brain.widthCanvas.Y,brain.heightCanvas.Y)}else{for(xx=0;xx<brain.nbSlice.X;xx++){posW=xx%brain.nbCol;posH=(xx-posW)/brain.nbCol;brain.planes.contextY.drawImage(brain.planes.canvasX,posW*brain.nbSlice.Y+brain.numSlice.Y,posH*brain.nbSlice.Z,1,brain.nbSlice.Z,xx,0,1,brain.nbSlice.Z)}brain.context.drawImage(brain.planes.canvasY,0,0,brain.nbSlice.X,brain.nbSlice.Z,brain.widthCanvas.X,(brain.heightCanvas.max-brain.heightCanvas.Y)/2,brain.widthCanvas.Y,brain.heightCanvas.Y)}if(brain.colorMap&&!brain.colorMap.hide){brain.context.drawImage(brain.colorMap.img,0,0,brain.colorMap.img.width,1,Math.round(brain.widthCanvas.X+brain.widthCanvas.Y*.2),Math.round(brain.heightCanvas.max*brain.heightColorBar/2),Math.round(brain.widthCanvas.Y*.6),Math.round(brain.heightCanvas.max*brain.heightColorBar));brain.context.fillStyle=brain.colorFont;brain.context.fillText(brain.colorMap.min,brain.widthCanvas.X+brain.widthCanvas.Y*.2,Math.round(brain.heightCanvas.max*brain.heightColorBar*2+3/4*brain.sizeFontPixels));brain.context.fillText(brain.colorMap.max,brain.widthCanvas.X+brain.widthCanvas.Y*.8-brain.context.measureText(brain.colorMap.max).width,Math.round(brain.heightCanvas.max*brain.heightColorBar*2+3/4*brain.sizeFontPixels))}if(brain.flagCoordinates){brain.context.font=brain.sizeFontPixels+"px Arial";brain.context.fillStyle=brain.colorFont;coord="y="+brain.coordinatesSlice.Y;coordWidth=brain.context.measureText(coord).width;brain.context.fillText(coord,brain.widthCanvas.X+brain.widthCanvas.Y/2-coordWidth/2,Math.round(brain.canvas.height-brain.sizeFontPixels/2))}case"Z":brain.context.fillStyle=brain.colorBackground;brain.context.fillRect(brain.widthCanvas.X+brain.widthCanvas.Y,0,brain.widthCanvas.Z,brain.canvas.height);if(brain.fastDraw){pos.ZW=brain.numSlice.Z%brain.nbCol;pos.ZH=(brain.numSlice.Z-pos.ZW)/brain.nbCol;brain.context.drawImage(brain.planes.canvasZ,pos.ZW*brain.nbSlice.X,pos.ZH*brain.nbSlice.Y,brain.nbSlice.X,brain.nbSlice.Y,brain.widthCanvas.X+brain.widthCanvas.Y,(brain.heightCanvas.max-brain.heightCanvas.Z)/2,brain.widthCanvas.Z,brain.heightCanvas.Z)}else{for(xx=0;xx<brain.nbSlice.X;xx++){posW=xx%brain.nbCol;posH=(xx-posW)/brain.nbCol;brain.planes.contextZ.drawImage(brain.planes.canvasX,posW*brain.nbSlice.Y,posH*brain.nbSlice.Z+brain.numSlice.Z,brain.nbSlice.Y,1,0,xx,brain.nbSlice.Y,1)}brain.context.drawImage(brain.planes.canvasZ,0,0,brain.nbSlice.X,brain.nbSlice.Y,brain.widthCanvas.X+brain.widthCanvas.Y,(brain.heightCanvas.max-brain.heightCanvas.Z)/2,brain.widthCanvas.Z,brain.heightCanvas.Z)}if(brain.flagCoordinates){coord="z="+brain.coordinatesSlice.Z;coordWidth=brain.context.measureText(coord).width;brain.context.fillStyle=brain.colorFont;brain.context.fillText(coord,brain.widthCanvas.X+brain.widthCanvas.Y+brain.widthCanvas.Z/2-coordWidth/2,Math.round(brain.canvas.height-brain.sizeFontPixels/2))}}};brain.clickBrain=function(e){var rect=brain.canvas.getBoundingClientRect();var xx=e.clientX-rect.left;var yy=e.clientY-rect.top;var sy,sz;if(xx<brain.widthCanvas.X){sy=Math.round(brain.nbSlice.Y*(xx/brain.widthCanvas.X));sz=Math.round(brain.nbSlice.Z*(yy-(brain.heightCanvas.max-brain.heightCanvas.X)/2)/brain.heightCanvas.X);brain.draw(Math.max(Math.min(sy,brain.nbSlice.Y-1),0),"Y");brain.draw(Math.max(Math.min(sz,brain.nbSlice.Z-1),0),"Z")}else if(xx<brain.widthCanvas.X+brain.widthCanvas.Y){xx=xx-brain.widthCanvas.X;sx=Math.round(brain.nbSlice.X*(xx/brain.widthCanvas.Y));sz=Math.round(brain.nbSlice.Z*(yy-(brain.heightCanvas.max-brain.heightCanvas.Y)/2)/brain.heightCanvas.Y);brain.draw(Math.max(Math.min(sx,brain.nbSlice.X-1),0),"X");brain.draw(Math.max(Math.min(sz,brain.nbSlice.Z-1),0),"Z")}else{xx=xx-brain.widthCanvas.X-brain.widthCanvas.Y;sx=Math.round(brain.nbSlice.X*(xx/brain.widthCanvas.Z));sy=Math.round(brain.nbSlice.Y*(1-(yy-(brain.heightCanvas.max-brain.heightCanvas.Z)/2)/brain.heightCanvas.Z));brain.draw(Math.max(Math.min(sx,brain.nbSlice.X-1),0),"X");brain.draw(Math.max(Math.min(sy,brain.nbSlice.Y-1),0),"Y");brain.draw(brain.numSlice.Z,"Z")}if(brain.onclick){brain.onclick(e)}};brain.drawAll=function(){brain.draw(brain.numSlice.X,"X");brain.draw(brain.numSlice.Y,"Y");brain.draw(brain.numSlice.Z,"Z")};brain.canvas.addEventListener("click",brain.clickBrain,false);brain.canvas.addEventListener("mousedown",function(e){brain.canvas.addEventListener("mousemove",brain.clickBrain,false)},false);brain.canvas.addEventListener("mouseup",function(e){brain.canvas.removeEventListener("mousemove",brain.clickBrain,false)},false);brain.sprite.addEventListener("load",function(){brain.init();brain.drawAll()});if(brain.overlay){brain.overlay.sprite.addEventListener("load",function(){brain.init();brain.drawAll()})}brain.init();brain.drawAll();return brain}</script> 
 <script type="text/javascript">
  var subjs = []
  function qc_update(subj_id, stage, value) {
    subjs[subj_id - 1][stage] = parseInt(value)
  }

  function get_csv(items) {
    // https://stackoverflow.com/questions/44396943/generate-a-csv-file-from-a-javascript-array-of-objects
    let csv = ''

    // Loop the array of objects
    for(let row = 0; row < items.length; row++){
        let keysAmount = Object.keys(items[row]).length
        let keysCounter = 0

        // If this is the first row, generate the headings
        if(row === 0){

           // Loop each property of the object
           for(let key in items[row]){

              // This is to not add a comma at the last cell
              // The '\r\n' adds a new line
              csv += key + (keysCounter+1 < keysAmount ? ',' : '\r\n' )
              keysCounter++
           }
           let keysCounterb = 0
           for(let key in items[row]){
               csv += items[row][key] + (keysCounterb+1 < keysAmount ? ',' : '\r\n' )
               keysCounterb++
           }
        }else{
           for(let key in items[row]){
               csv += items[row][key] + (keysCounter+1 < keysAmount ? ',' : '\r\n' )
               keysCounter++
           }
        }

        keysCounter = 0
    }

    // Once we are done looping, download the .csv by creating a link
    let link = document.createElement('a')
    link.id = 'download-csv'
    link.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(csv));
    link.setAttribute('download', 'manual_qc.csv');
    document.body.appendChild(link)
    document.querySelector('#download-csv').click()
  }

 </script>
<div class="document">

<h1>afni_proc.py: group report</h1>


{% for config in configs %}
  <script type="text/javascript">
    var subj_qc = {id:{{ config['subj_id'] }}, motion:null, registration:null}
  </script>

  <h2>Subject {{ config['subj_id'] }} Summary</h2>
  <ul class="simple">
  <li>Subject ID: {{ config['subj_id'] }}.</li>
  <li>Blocks run: {{ config['blocks'] }}.</li>

  {% if config['warnings'] %}
  <li>Warnings:
    <ul class="sub-simple">
    {% for warn in config['warnings'] %}
    <li>{{ warn }}</li>
    {% endfor %}
    </ul>
  </li>
  {% endif %}

  {% if config['motion_report'] %}
  <h2>Subject {{ config['subj_id'] }} Motion Report</h2>
  <div class="radio">
  <label><input type="radio" name="inlineRadio" id="inlineRating1" value="1" onclick="qc_update({{ config['subj_id'] }}, 'motion', this.value)"> Good </label>
  <label><input type="radio" name="inlineRadio" id="inlineRating0" value="0" onclick="qc_update({{ config['subj_id'] }}, 'motion', this.value)"> Bad</label>
  </div>
  <div class="embeded-report">
  {{ config['motion_report'] }}
  </div>
  <script type="text/javascript">
  subj_qc["motion"] = -1
  </script>
  {% endif %}

  {% if config['volreg_report_anat'] %}
    <h2>Subject {{ config['subj_id'] }} Registration</h2>
    <div class="radio">
    <label><input type="radio" name="inlineRadio" id="inlineRating1" value="1" onclick="qc_update({{ config['subj_id'] }}, 'registration', this.value)"> Good </label>
    <label><input type="radio" name="inlineRadio" id="inlineRating0" value="0" onclick="qc_update({{ config['subj_id'] }}, 'registration', this.value)"> Bad</label>
    </div>
    <div class="embeded-report">
      <div>
        <canvas id="3Dviewer_{{ config['subj_id'] }}", onclick="change_{{ config['subj_id'] }}();">
        <img id="spriteImg_{{ config['subj_id'] }}" class="hidden" src="data:image/jpeg;base64,{{ config['volreg_report_anat'] }}">
    </div>
    </div>
    <script type="text/javascript">
      subj_qc["registration"] = -1
    </script>
  {% endif %}
  <script type="text/javascript">
    subjs.push(subj_qc)
  </script>
  </ul>



  <script type="text/javascript">

    var image_tracker_{{ config['subj_id'] }} = 'anat';
    var anat_src_{{ config['subj_id'] }} = null
     
    function change_{{ config['subj_id'] }}(){
    var image = document.getElementById("spriteImg_{{ config['subj_id'] }}");

    if(image_tracker_{{ config['subj_id'] }}=='anat'){
      if(anat_src_{{ config['subj_id'] }}){
      }else{
        anat_src_{{ config['subj_id'] }}=image.src
      }
      image.src="data:image/jpeg;base64,{{ config['volreg_report_func'] }}";
      image_tracker_{{ config['subj_id'] }}='func';
    }else{
    image.src=anat_src_{{ config['subj_id'] }};
    image_tracker_{{ config['subj_id'] }}='anat';
    }
    }

    $( window ).load(function() {
      var brain = brainsprite({
        canvas: "3Dviewer_{{ config['subj_id'] }}",
        sprite: "spriteImg_{{ config['subj_id'] }}",
        nbSlice: { 'Y':{{ config['anat_ap_ext'] }} , 'Z':{{ config['anat_is_ext'] }} }
      });
    });

  </script>
{% endfor %}
<button type="button" id="csv_download" onclick="get_csv(subjs)">Download Quality Control as a CSV</button>
 Download a csv of the quality control ratings you just entered as a csv.
</body>
</html>